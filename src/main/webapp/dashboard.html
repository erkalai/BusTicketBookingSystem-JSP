<!-- <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> -->


<!-- <%
if(session.getAttribute("uname") == null){
	response.sendRedirect("login.jsp");
}
%>  -->

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
        <div class="container">
            <form action="">
                <p class="lead fw-bold mb-1 text-center">Book Bus Tickets</p>
                <div class="row mt-5 justify-content-center">
                    <div class="col form-outline mb-2 ">
                        <input type="text" name="source" id="source" class="form-control" placeholder="Source">
                    </div>
                    <div class="col form-outline mb-2">
                        <input type="email" name="email" id="email" class="form-control" placeholder="Destination">
                    </div>
                    <div class="col form-outline mb-2">
                        <input type="date" name="mobileno" id="mobileno" class="form-control" placeholder="Onward">
                    </div>
                    <div class="col form-outline mb-2">
                        <button class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="container">
            <!-- Show Bus details Table Start -->
            <table class="table mt-5">
                <thead>
                    <tr>
                        <th scope="col">Bus Name</th>
                        <th scope="col">Start Place</th>
                        <th scope="col">End Place</th>
                        <th scope="col">Bus Route</th>
                        <th scope="col">Departure Date</th>
                        <th scope="col">Arrival Date</th>
                        <th scope="col">Departure Time</th>
                        <th scope="col">Arrival Time</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Delux</th>
                        <td>Thirupur</td>
                        <td>Chennai</td>
                        <td>Trichy</td>
                        <td>12/11/2024</td>
                        <td>13/11/2024</td>
                        <td>10:10 PM</td>
                        <td>5:30 AM</td>
                        <td>
                            <div class="btn bg-primary me-2">Book</div>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Ultra Delux</th>
                        <td>Selam</td>
                        <td>Chennai</td>
                        <td>Madurai</td>
                        <td>15/12/2024</td>
                        <td>16/12/2024</td>
                        <td>9:30 PM</td>
                        <td>5:00 AM</td>
                        <td>
                            <div class="btn bg-primary me-2">Book</div>
                        </td>
                    </tr>
                </tbody>
            </table>
        <!-- Show Bus details Table End -->
        </div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        async function handleSearch(query) {
            if (!query) {
                searchResults.innerHTML = ''; // Clear results if query is empty
                return;
            }

            try {
                const response = await fetch(`http://localhost:8082/DemoBilling/search?query=${encodeURIComponent(query)}`);
                const results = await response.json(); // Parse JSON response

                searchResults.innerHTML = '';
                results.forEach(result => {
                    const li = document.createElement('li');
                    li.textContent = result; // Display each result
                    searchResults.appendChild(li);
                });
            } catch (error) {
                console.error("Error fetching search results", error);
            }
        }

        searchInput.addEventListener('input', () => {
            const query = searchInput.value;
            handleSearch(query);
        });
    </script>

   </body>
</html>