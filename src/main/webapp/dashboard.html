<!-- <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> -->


<!-- <%
if(session.getAttribute("uname") == null){
	response.sendRedirect("login.jsp");
}
%>  -->

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
<h1>Book Bus Ticket</h1>
        <div class="container-fluid">
            <div class="row d-flex justify-content-center align-items-center">
                    <div class="col text-center mt-5 pt-5 col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                        <form action="showBusDetails" name="" method="post" id="form">
                        <p class="lead fw-bold mb-1">Book Bus Tickets</p>
                        <div class="form-outline mb-2">
                            <input type="text" name="source" id="source" class="form-control" placeholder="Source">
                            <ul id="searchResults"></ul>
                            <div class="error text-danger text-start"></div>
                        </div>
                        <div class="form-outline mb-2">
                            <input type="email" name="email" id="email" class="form-control" placeholder="Destination">
                            <div class="error text-danger text-start"></div>
                        </div>
                        <div class="form-outline mb-2">
                            <input type="date" name="mobileno" id="mobileno" class="form-control" placeholder="Onward">
                            <div class="error text-danger text-start"></div>
                        </div>
                        <button class="btn btn-primary btn-lg mt-2 d-flex align-items-center justify-content-center" >Search</button>
                        </form>
                    </div> 
            </div>
        </div>
    <script>
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');

        async function handleSearch(query) {
            if (!query) {
                searchResults.innerHTML = ''; // Clear results if query is empty
                return;
            }

            try {
                const response = await fetch(`http://localhost:8082/DemoBilling/search?query=${encodeURIComponent(query)}`);
                const results = await response.json(); // Parse JSON response

                searchResults.innerHTML = '';
                results.forEach(result => {
                    const li = document.createElement('li');
                    li.textContent = result; // Display each result
                    searchResults.appendChild(li);
                });
            } catch (error) {
                console.error("Error fetching search results", error);
            }
        }

        searchInput.addEventListener('input', () => {
            const query = searchInput.value;
            handleSearch(query);
        });
    </script>

   </body>
</html>